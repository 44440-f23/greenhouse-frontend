<!DOCTYPE html>
<html>
    <head>
        <script src="https://cdn.socket.io/4.6.0/socket.io.min.js" integrity="sha384-c79GN5VsunZvi+Q/WObgk2in0CbZsHnjEqvFxC5DxHn9lTfNce2WW6h2pH6u/kF+" crossorigin="anonymous"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='settings.css') }}"/>
      </head>
    <body>
        <header>
            <nav class="navbar navbar-expand-lg bg-light">
              <div class="container-fluid">
                <a class="navbar-brand" href="#">Navbar</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                  <ul class="navbar-nav">
                    <li class="nav-item">
                      <a class="nav-link active" aria-current="page" href="/">Status-at-a-Glance</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" href="{{ url_for('settings') }}">Settings</a>
                    </li>
                  </ul>
                </div>
              </div>
          </nav>
        </header>

        <h1>
            Greenhouse Setting
        </h1>
        
        <form>
        <div id="greenhouse1">
            <h2>
                Greenhouse 1
            </h2>
            <h3>temp</h3>
            <div id="greenhouse1temp">
            <input class="min" type="number" placeholder="min"/>
            <input class="max" type="number" placeholder="max"/>
            </div>
            <h3>humitity</h3>
            <div id="greenhouse1hum">
            <input class="min" type="number" placeholder="min"/>
            <input class="max" type="number" placeholder="max"/>
            </div>
        </div>
        <div id="greenhouse2">
            <h2>
                Greenhouse 2
            </h2>
            <h3>temp</h3>
            <div id="greenhouse2temp">
            <input class="min" type="number" placeholder="min"/>
            <input class="max" type="number" placeholder="max"/>
            </div>
            <h3>humitity</h3>
            <div id="greenhouse2hum">
            <input class="min" type="number" placeholder="min"/>
            <input class="max" type="number" placeholder="max"/>
            </div>
        </div>
        <div id="greenhouse3">
            <h2>
                Greenhouse 3
            </h2>
            <h3>temp</h3>
            <div id="greenhouse3temp">
            <input class="min" type="number" placeholder="min"/>
            <input class="max" type="number" placeholder="max"/>
            </div>
            <h3>humitity</h3>
            <div id="greenhouse3hum">
            <input class="min" type="number" placeholder="min"/>
            <input class="max" type="number" placeholder="max"/>
            </div>
        </div>
        <div id="greenhouse4">
            <h2>
                Greenhouse 4
            </h2>
            <h3>temp</h3>
            <div id="greenhouse4temp">
            <input class="min" type="number" placeholder="min"/>
            <input class="max" type="number" placeholder="max"/>
            </div>
            <h3>humitity</h3>
            <div id="greenhouse4hum">
            <input class="min" type="number" placeholder="min"/>
            <input class="max" type="number" placeholder="max"/>
            </div>
        </div>
        <div id="greenhouse5">
            <h2>
                Greenhouse 5
            </h2>
            <h3>temp</h3>
            <div id="greenhouse5temp">
            <input class="min" type="number" placeholder="min"/>
            <input class="max" type="number" placeholder="max"/>
            </div>
            <h3>humitity</h3>
            <div id="greenhouse5hum">
            <input class="min" type="number" placeholder="min"/>
            <input class="max" type="number" placeholder="max"/>
            </div>
        </div>
        <div id="greenhouse6">
            <h2>
                Greenhouse 6
            </h2>
            <h3>temp</h3>
            <div id="greenhouse6temp">
            <input class="min" type="number" placeholder="min"/>
            <input class="max" type="number" placeholder="max"/>
            </div>
            <h3>humitity</h3>
            <div id="greenhouse6hum">
            <input class="min" type="number" placeholder="min"/>
            <input class="max" type="number" placeholder="max"/>
            </div>
        </div>
        <div class="col-12">
            <button class="btn btn-primary" type="submit" onclick="submitForm(event)">Submit changes</button>
        </div>
        </form>
        
    <pre id="jsonDisplay"></pre> <!-- Element to display the JSON data -->

    <script>
        function submitForm(event) {
            event.preventDefault(); // Prevents the default form submission behavior

            const minInputs = document.querySelectorAll('.min');
            const maxInputs = document.querySelectorAll('.max');

            const numberOfGreenhouses = minInputs.length / 2; // Assuming each greenhouse has 2 sets of inputs (min and max)

            const greenhouseData = {};

            for (let i = 0; i < numberOfGreenhouses; i++) {
                const index = i * 2; // Adjust the index to capture the appropriate input elements

                const greenhouseNumber = i + 1;

                greenhouseData[greenhouseNumber] = {
                    tempMax: maxInputs[index].value,
                    tempMin: minInputs[index].value,
                    humidityMax: maxInputs[index + 1].value,
                    humidityMin: minInputs[index + 1].value
                };
            }

            const jsonData = JSON.stringify(greenhouseData, null, 2);

            const jsonDisplay = document.getElementById('jsonDisplay');
            jsonDisplay.textContent = jsonData;
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    </body>
    
</html>